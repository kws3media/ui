import pkg from '../packages/@kws3/ui/package.json';

export const versions = {
  v2 : "https://ui.kws3.media/v2/", 
  v3 : "https://ui.kws3.media/v3/", 
  v4 : "https://ui.kws3.media/v4/"
  };
export let selectedVersion = pkg.version;
export const cmd = "npm i -D @kws3/ui";
export let copied = false;
export function ctc(e){
  e && e.currentTarget && e.currentTarget.blur();
  if (!copied && navigator && navigator.clipboard && navigator.clipboard.writeText){
    navigator.clipboard.writeText(cmd);
    copied = true;
    const target = document.querySelector('#npm-command-copier');
    const classes = ("is-success").split(" ");
    // @ts-ignore
    target.value = "âœ… Copied!";
    // @ts-ignore
    classes.forEach((c) => target.classList.add(c));
    setTimeout(() => {
      // @ts-ignore
      target.value = cmd;
      copied = false;
      // @ts-ignore
      classes.forEach((c) => target.classList.remove(c));
    }, 1000);
  }
}
export function handleVersionChange(version){
  selectedVersion = version;
}

<div className="page-top-right-artifacts box">
  <div className="artifact-item-block">
    <a className="artifact-item" href="https://github.com/kws3media/ui/tree/master/packages/%40kws3/ui" target="_blank">
      <span className="icon-text">
        <span className="icon">
          <i className="fa fa-github"></i>
        </span>
        <span>Github</span>
      </span>
    </a>

  <div className="dropdown">
    <div className="dropdown-trigger">
      <span className="artifact-item tags has-addons">
        <span className="tag">Version</span>
        <span className="tag is-primary">{pkg.version}</span>
        <span className="tag"><span className="icon">
          <i className="fa fa-angle-down"></i>
        </span></span>
      </span>
    </div>
    
    <div className="dropdown-content">  
      {Object.keys(versions).map((key) => (
        <a
          key={key}
          href={versions[key]}
          className={`dropdown-item ${key === selectedVersion ? 'is-active' : ''}`}
          onClick={() => handleVersionChange(key)}
        >
          {key}
        </a>
      ))}
    </div>
</div>

  </div>
  
  <div className="artifact-item-block is-hidden-mobile">
    <div className="field has-addons">
      <span className="control is-expanded"><input id="npm-command-copier" className="input is-small has-background-light is-family-monospace" readOnly value={cmd} /></span>
      <span className="control">
        <button className="button is-small" title="Copy to clipboard" onClick={ctc}>
          <span className="icon">
            <i className="fa fa-copy"></i>
          </span>
        </button>
      </span>
    </div>
  </div>
</div>