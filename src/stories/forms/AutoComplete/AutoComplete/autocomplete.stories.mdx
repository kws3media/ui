import {
  Story,
  Preview,
  Meta,
  ArgsTable,
  Source,
  Description,
  Canvas,
} from "@storybook/addon-docs";
import dedent from "ts-dedent";
import Version from "~/version.mdx";
import { AutoComplete } from "@kws3/ui";
import AutoCompleteDecorator from "./AutoComplete.svelte";
import { action } from "@storybook/addon-actions";
import playInteractions from "./autocomplete.play.js";

export let args = {
  value: "",
  style: "",
  class: "",
  size: "",
  color: "",
  options: [],
  search_strategy: "fuzzy",
  disabled: false,
  readonly: false,
  placeholder: "Marvel characters...",
  highlight_mathces: true
};

<Version />

<Meta
  title="Forms/AutoComplete/AutoComplete"
  component={AutoComplete}
  args={args}
  argTypes={{
    color: {
      control: { type: "select" },
    },
    size: {
      control: { type: "select" },
    },
    search_strategy: {
      control: { type: "select" },
    }
  }}
/>

<Description
  markdown={dedent`
# AutoComplete
## An Input component that supports auto complete tips.
`}/>

<Canvas>
  <Story name="AutoComplete" args={args} play={playInteractions}>
    {(args) => ({
      Component: AutoCompleteDecorator,
      props: args,
    })}
  </Story>
</Canvas>

<ArgsTable story="AutoComplete" />

<div class="notification is-primary is-light">
  <div class="columns">
    <div class="column">
      <h3>
        Input format <code>options</code>
      </h3>
      <p>
        Can send either an array of strings, or an array of objects.<br></br>Always
        ensure the shape of the array items are consistent.
      </p>
      <p>See supported data formats in example story above.</p>
      <p>Note: <code>option.label</code> contains matches characters wrapped inside <code>span</code> along with text </p>
    </div>
    <div class="column">
      <h3>Customising dropdown text items</h3>
      <p>See documentation for default slot.</p>
      <h4>Example:</h4>
      <Source
        language="jsx"
        code={dedent`<AutoComplete
      ...other_options
      let:option>
      <span class="has-text-danger">
        {@html option.label}
      </span>
    </AutoComplete>`}
      />
    </div>
  </div>
</div>

### Usage

#### Import the component:

<Source
  language="javascript"
  code={dedent`import { AutoComplete } from '@kws3/ui';`}
/>

#### Import the SCSS:

<Source
  language="javascript"
  code={dedent`@import '@kws3/ui/styles/AutoComplete.scss';`}
/>

#### SCSS customization variables with default values:

<Source
  language="css"
  code={dedent`
      $kws-theme-colors: $colors !default;
      $kws-autocomplete-radius: $radius !default;
      $kws-autocomplete-border-color: $input-border-color !default;
      $kws-autocomplete-box-shadow: 0 0.5em 1em -0.125em rgb(10 10 10 / 10%),
        0 0px 0 1px rgb(10 10 10 / 2%) !default;
      $kws-autocomplete-focus-border-color: $input-focus-border-color !default;
      $kws-autocomplete-focus-box-shadow-size: $input-focus-box-shadow-size !default;
      $kws-autocomplete-focus-box-shadow-color: $input-focus-box-shadow-color !default;
      $kws-autocomplete-disabled-background-color: $input-disabled-background-color !default;
      $kws-autocomplete-disabled-border-color: $input-disabled-border-color !default;
      $kws-autocomplete-disabled-color: $input-disabled-color !default;
      $kws-autocomplete-selecting-color: $primary-invert !default;
      $kws-autocomplete-selecting-background: $primary !default;
      $kws-autocomplete-text-matches-color: currentColor !default;
      $kws-autocomplete-text-matches-background: transparent !default;
      $kws-autocomplete-text-matches-font-weight: $weight-bold !default;
    `}
/>
