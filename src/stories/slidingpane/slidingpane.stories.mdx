import { Story, Preview, Meta, ArgsTable, Source, Description, Canvas  } from '@storybook/addon-docs';
import dedent from 'ts-dedent';
import Version from '~/version.mdx';
import { SlidingPane } from "@kws3/ui";
import SlidingpaneDecorator from './Slidingpane.svelte';
import { action } from '@storybook/addon-actions';

export let args={
  active : false,
  class : "",
  style : "",
  v_center : true,
  h_center : true,
  track_height : true
}


<Version />

<Meta
  title="Standalone/SlidingPane"
  component={SlidingPane}
  args={args}
/>

<Description markdown={dedent`
# Sliding Panes
## Sliding panes component for Svelte applications
`}/>

<Canvas>
  <Story
  name="SlidingPane"
  args={args}
  >
  {(args) => ({
    Component: SlidingpaneDecorator,
    props: args,
    on: {
      heightChange : action("Changed")
    },
  })}
  </Story>
</Canvas>

<ArgsTable story="SlidingPane" />

### Usage 
##### Import the component:
<Source
  language='javascript'
  code={ dedent`import { SlidingPane, SlidingPaneSet } from '@kws3/ui';`}
/>

##### Import the SCSS:
<Source
  language='javascript'
  code={ dedent`@import '@kws3/ui/styles/SlidingPane.scss';`}
/>

##### Example
<Source
  language='html'
  code={ dedent`
      <SlidingPaneSet style="height:{pane_height}px">
        <SlidingPane
          active={steps[active_index].key == "step_one"}
          {v_center}
          {h_center}
          {track_height}
          class={klass}>
          <p>1st Slide</p>
        </SlidingPane>
        <SlidingPane
          active={steps[active_index].key == "step_two"}
          {v_center}
          {h_center}
          {track_height}
          class={klass}>
          <p>2nd Slide</p>
        </SlidingPane>
      </SlidingPaneSet>
      <script>
        import { SlidingPane, SlidingPaneSet } from "@kws3/ui";
        export let pane_height = 150,
          style = "",
          v_center = true,
          h_center = true,
          track_height = false,
          steps = [
            { key: "step_one", name: "Step One" },
            { key: "step_two", name: "Step Two" }
          ],
          active_index = 0;
        export function changeStep(i) {
          let max = steps.length;
          let _index = Math.max(0, Math.min(active_index + i, max - 1));
          active_index = _index;
        }
        let klass = "";
        export { klass as class };
      </script>
  `}
/>