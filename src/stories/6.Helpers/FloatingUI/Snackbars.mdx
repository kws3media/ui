import { Meta, Controls, Source, Canvas  } from "@storybook/blocks";
import dedent from 'ts-dedent';
import Version from '~/version.mdx';
import * as Stories from "./Snackbars.stories";

<Version />

# Snackbars
## Snackbars components for showing floating alerts.

<Meta of={Stories} />
<Canvas />
<Controls />

<div className="columns">
  <div className="column is-6">
  ### Usage
  ```js
  import { Snackbars } from '@kws3/ui';
  // Push snackbar like this
  let {props, destroy} = Snackbars.create({
    message: "I am a snackbar...",
    persistent: true,
    position: "top",
    color: "info",
    beforeClose: (props) => {
      //do something here before close
    },
    afterClose: (props) => {
      //do something here after close
    },
  });
  // snackbar will close after duration expires
  // or you can close it manually like this:
  destroy();
  //you can also close it like this:
  Snackbars.remove(props);
  //where `props` is the from the output of Snackbars.create()
  ```
  </div>
  <div className="column is-6">
    ### Usage with custom buttons
    `buttons` accept an array of objects or array of strings
    If objects are used, the shape is:
    ```
    \{
      text: <string>,
      color: <string>,
      click: <function>
    }
    ```
    Example:
    ```js
      let {props, destroy} = Snackbars.create({
        ...other_opts,
        buttons:[
          {
            text: "Undo", //button text
            color: "warning", //button text color
            click: () => {alert("Undo clicked")} //click handler
          },
          "Ok" //just a string
        ]
      });
    ```
    <div className="notification is-info is-light">
      All button clicks will close the Snackbar.<br></br>
      If there is a custom click handler, Snackbar will close after running the click handler.
    </div>
  </div>
</div>


#### Import the SCSS:
_Default values shown as example_
<Source
  code={ dedent`
    @use '@kws3/ui/styles/FloatingUI.scss' with(
      $theme-colors: dv.$colors,
      $item-width: 25rem,
      $progressbar-radius: 0 cv.getVar("radius") cv.getVar("radius")
        cv.getVar("radius"),
      $notification-radius: cv.getVar("radius"),
      $notification-shadow:
        0 1px 4px
          hsla(
            cv.getVar("shadow-h"),
            cv.getVar("shadow-s"),
            cv.getVar("shadow-l"),
            0.12
          ),
        0 0 6px
          hsla(
            cv.getVar("shadow-h"),
            cv.getVar("shadow-s"),
            cv.getVar("shadow-l"),
            0.04
          ),
      $snackbar-radius: cv.getVar("radius"),
      $snackbar-shadow:
        0 1px 4px
          hsla(
            cv.getVar("shadow-h"),
            cv.getVar("shadow-s"),
            cv.getVar("shadow-l"),
            0.12
          ),
        0 0 6px
          hsla(
            cv.getVar("shadow-h"),
            cv.getVar("shadow-s"),
            cv.getVar("shadow-l"),
            0.04
          ),
      $toast-radius: 1.5em,
      $toast-shadow:
        0 1px 4px
          hsla(
            cv.getVar("shadow-h"),
            cv.getVar("shadow-s"),
            cv.getVar("shadow-l"),
            0.12
          ),
        0 0 6px
          hsla(
            cv.getVar("shadow-h"),
            cv.getVar("shadow-s"),
            cv.getVar("shadow-l"),
            0.04
          ),
    );
  `}
/>