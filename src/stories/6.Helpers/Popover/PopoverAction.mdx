import { Meta, Source  } from "@storybook/blocks";
import dedent from 'ts-dedent';
import Version from '~/version.mdx';

<Version />

<Meta
  title="Helpers/Popover/Popover Action"
/>

### Usage via Svelte actions
Popovers can also initialised using Svelte actions, instead of using the component.  

<div className="columns">
  <div className="column">

The action accepts an object of parameters.  
The most important of which is `content`.  

`content` needs to be, either a reference to a dom node, or a string.  
When a string is provided, the string will be displayed as the popover content.

For a list of other supported parameters, see: https://atomiks.github.io/tippyjs/v6/all-props/

  </div>
  <div className="column">

```html
<div use:popover={{content: popoverContent}}>
  Some Content
</div>

<div bind:this={popoverContent}>
  Content of popover
</div>

<script>
  import { popover } from '@kws3/ui'; //notice lowercase import name

  let popoverContent;
</script>
```

  </div>
</div>

Parameters can be sent during action initialisation, or as `data-tippy-*` attributes.  
The following examples are functionally identical:

<div className="columns">
  <div className="column">

```html
<div 
  use:popover={{
    content: popoverContent,
    placement: 'bottom',
    offset: [0, 10],
    maxWidth: '500px'
  }}>
  Some Content
</div>
```

  </div>
  <div className="column">

```html
<div 
  use:popover={{content: popoverContent}}
  data-tippy-placement="bottom"
  data-tippy-offset="[0, 10]"
  data-tippy-maxWidth="500px"
  >
  Some Content
</div>
```

  </div>
</div>

### Do not forget to Import the SCSS:
_Default values shown as example_
<Source
  code={
    dedent`
    @use '@kws3/ui/styles/Tooltip.scss' with (
      $popover-background: cv.getVar("background"),
      $popover-color: cv.getVar("text"),
      $popover-arrow-color: cv.getVar("border"),
      $popover-shadow: 0 5px 10px -5px hsla(cv.getVar("shadow-h"), cv.getVar("shadow-s"), cv.getVar("shadow-l"), 0.4),
      $popover-radius: cv.getVar("radius-small")
    );
    `
  }
/>
