import { Meta, Controls, Source, Canvas  } from "@storybook/blocks";
import dedent from 'ts-dedent';
import Version from '~/version.mdx';
import * as Stories from "./Popover.stories";

<Version />

# Popover
## Display contextual popovers

<Meta of={Stories} />
<Canvas />
<Controls />

### Usage
##### Import the component:
<Source
  code={ dedent`import { Popover } from '@kws3/ui';`}
/>

<div className="columns is-multiline">
  <div className="column is-4">

#### Default
```html
<Popover>
  Click me to see popover
  <svelte:fragment
    slot="popover">
    This is the popover content
  </svelte:fragment>
</Popover>

<script>
import {Popover} from '@kws3/ui';
</script>
```

  </div>
  <div className="column is-4">

#### Component in `popover` slot
```html
<Popover>
  Click me to see popover
  <svelte:fragment
    slot="popover">
    <Message color="success">
      This is the popover content
    </Message>
  </svelte:fragment>
</Popover>

<script>
import {
  Popover,
  Message
} from '@kws3/ui';
</script>
```

  </div>
  <div className="column is-4">

#### Usage of `external_target`
```html
<Popover
  external_target={aNode}>
  Click me to see popover
</Popover>

<div bind:this={aNode}>
  This is the popover content
</div>

<script>
import {Popover} from '@kws3/ui';

let aNode;

</script>
```

  </div>
  <div className="column is-6">

#### Manual Control
```html
<Popover bind:this={pop1}>
  Popover Anchor
  <svelte:fragment
    slot="popover">
    This is the popover content
  </svelte:fragment>
</Popover>

<script>
import {Popover} from '@kws3/ui';
let pop1;

function showPopover(e){
  pop1.show();
}

function hidePopover(e){
  pop1.hide();
}
</script>
```

  </div>
  <div className="column is-6">

#### Events
```html
<Popover
  on:opening={({detail}) => {
    console.log(detail.instance)
  }}
  on:open={({detail}) => {
    console.log(detail.instance)
  }}
  on:closing={({detail}) => {
    console.log(detail.instance)
  }}
  on:close={({detail}) => {
    console.log(detail.instance)
  }}
  on:trigger={({detail}) => {
    console.log(detail.instance)
  }}
>
  Click me to see popover
  <svelte:fragment
    slot="popover">
    This is the popover content
  </svelte:fragment>
</Popover>

<script>
import {Popover} from '@kws3/ui';
</script>
```

  </div>
</div>

#### Import the SCSS:
_Default values shown as example_
<Source
  code={
    dedent`
    @use '@kws3/ui/styles/Tooltip.scss' with (
      $popover-background: cv.getVar("background"),
      $popover-color: cv.getVar("text"),
      $popover-arrow-color: cv.getVar("background"),
      $popover-shadow: 0 5px 10px -5px hsla(cv.getVar("shadow-h"), cv.getVar("shadow-s"), cv.getVar("shadow-l"), 0.4),
      $popover-radius: cv.getVar("radius-small")
    );
    `
  }
/>