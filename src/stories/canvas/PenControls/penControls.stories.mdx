import {
  Story,
  Preview,
  Meta,
  ArgsTable,
  Source,
  Description,
  Canvas,
} from "@storybook/addon-docs";
import dedent from "ts-dedent";
import { PenControls as KWS3PenControls } from "@kws3/ui";
import PenControlsDecorator from "./PenControls.svelte";
import { action } from "@storybook/addon-actions";

export let args = {
  canvas_controls_styles: "",
  readonly: false,
  disabled: false,
  tools: ["Pen", "Eraser"],
  actions: ["controls", "undo", "redo", "reset", "expand"],
  active_tool: "Pen",
  drawing_label: ""
};

<Meta
  title="Canvas/Pen Controls"
  component={KWS3PenControls}
  args={args}
  argTypes={{
  }}
/>

<Description
  markdown={dedent`
# Pen Controls
## Canvas tools.
`}
/>

<Canvas>
  <Story name="Pen Controls" args={args}>
    {(args) => ({
      Component: PenControlsDecorator,
      props: args,
    })}
  </Story>
</Canvas>

<ArgsTable story="Pen Controls" />

### Usage

<Source
  language="javascript"
  code={dedent`import { PenControls } from '@kws3/ui';`}
/>

##### Import the CSS:

<Source
  language="javascript"
  code={dedent`@import '@kws3/ui/styles/Canvas.scss';`}
/>

### Usage Example
<Source
  language='html'
  code={ dedent`
      <PenControls
      {canvas_controls_styles}
      {readonly}
      {disabled}
      {tools}
      {active_tool}
      {actions}
      {drawing_label}
      {setTool}
      {expandContract}
      bind:EXPANDED_BUTTON
      bind:DRAWING_PAD
      bind:can_undo
      bind:can_redo
      bind:show_tools />
    
    <script>
      import { PenControls } from '@kws3/ui';
      export let canvas_controls_styles = "";
      export let readonly = false;
      export let disabled = false;
      export let tools =["Pen", "Eraser"];
      export let actions = ["controls", "undo", "redo", "reset", "expand"];
      export let active_tool = "Pen";
      export let drawing_label = "";
      let DRAWING_PAD, EXPANDED_BUTTON;
      let can_undo = false,
          can_redo = false,
          expanded = false,
          show_tools = false;
      function setTool(tool) {
        active_tool = tool;
        show_tools = false;
        DRAWING_PAD && DRAWING_PAD.setTool(tool);
      }
      function expandContract() {
        expanded = !expanded;
        if (EXPANDED_BUTTON) {
          EXPANDED_BUTTON._tippy.setContent(
            EXPANDED_BUTTON.getAttribute("data-tooltip")
          );
        }
      }
    </script>
  `}
/>
