<button class="button {classes} is-{size} is-{color} {tracker.saving ? 'is-loading' : (tracker.error ? 'is-danger' : (tracker.saved ? 'is-success' : ''))}" type="submit" disabled="{disabled}" data-cy="{cy}">
  {#if tracker.saved}
    <Icon icon="check" size="{icon_size}" /> {#if !icon_only} <span>{saved_text}</span> {/if}
  {:elseif tracker.error}
    <Icon icon="exclamation" size="{icon_size}" /> {#if !icon_only} <span>{err_text}</span> {/if}
  {:else}
    <Icon icon="{icon}" size="{icon_size}" /> {#if !icon_only} <span>{text}</span> {/if}
  {/if}
</button>


<script>
  import { Icon } from '@kws3/helpers';

  export default {
    components: { Icon },
    data(){
      return {
        classes: '',
        size:'',
        color: 'primary',
        text: 'Save Changes',
        saved_text: 'Saved',
        error_text: 'Failed to Save',
        icon: 'save',
        cy:'submit',
        tracker:{
          saving: false,
          saved: false,
          error: false
        },
        icon_only: false,
        disabled: false
      }
    },
    computed:{
      err_text({text, error_text}){
        if(error_text == ''){
          return text;
        }
        return error_text;
      },
      icon_size({ size }){
        switch(size){
          case 'large':
            return '';
          break;
          default:
            return 'small';
          break;
        }
      }
    }
  }

</script>
