<div class="modal {class} {is_active ? 'is-active' : ''}" style="{style}" data-cy="{cy}">
  <div class="modal-background" on:click="fire('clickOutside')"></div>
  <div class="modal-content is-{size} {inner_class}" style="{inner_style}">
    <div class="box">
      <slot></slot>
    </div>
  </div>
  {#if closable}
    <button class="modal-close is-large" type="button" on:click="fire('close')"></button>
  {/if}
</div>

<script>
  export default {
    data(){
      return {
        size:'',
        is_active: false,
        closable: true,
        close_on_click_outside: false,
        style:'',
        inner_style:'',
        class:'',
        inner_class:'',
        cy: ''
      }
    },
    oncreate(){
      this.on('close', () => {
        this.close();
      });
      this.on('clickOutside', () => {
        let {close_on_click_outside, closable} = this.get();
        if(close_on_click_outside && closable){
          this.fire('close');
        }
      });
    },
    methods:{
      close(){
        this.set({is_active: false});
      },
      open(){
        this.set({is_active: true});
      }
    }
  }
</script>